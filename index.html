<!DOCTYPE html>
<html>
<head runat="server">
    <title>flux demo page</title>
    <script>
        var oldIE = false;

        //polyfills for IE8 support :-( /////////////////////////////////////////////
        if (!Function.prototype.bind) {
          Function.prototype.bind = function(oThis) {
            if (typeof this !== 'function') {
              // closest thing possible to the ECMAScript 5
              // internal IsCallable function
              throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
            }

            var aArgs   = Array.prototype.slice.call(arguments, 1),
                fToBind = this,
                fNOP    = function() {},
                fBound  = function() {
                  return fToBind.apply(this instanceof fNOP
                         ? this
                         : oThis,
                         aArgs.concat(Array.prototype.slice.call(arguments)));
                };

            if (this.prototype) {
              // native functions don't have a prototype
              fNOP.prototype = this.prototype; 
            }
            fBound.prototype = new fNOP();

            return fBound;
          };
        }

        if (!Array.prototype.map) {

          Array.prototype.map = function(callback, thisArg) {

            var T, A, k;

            if (this == null) {
              throw new TypeError(' this is null or not defined');
            }

            // 1. Let O be the result of calling ToObject passing the |this| 
            //    value as the argument.
            var O = Object(this);

            // 2. Let lenValue be the result of calling the Get internal 
            //    method of O with the argument "length".
            // 3. Let len be ToUint32(lenValue).
            var len = O.length >>> 0;

            // 4. If IsCallable(callback) is false, throw a TypeError exception.
            // See: http://es5.github.com/#x9.11
            if (typeof callback !== 'function') {
              throw new TypeError(callback + ' is not a function');
            }

            // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
            if (arguments.length > 1) {
              T = thisArg;
            }

            // 6. Let A be a new array created as if by the expression new Array(len) 
            //    where Array is the standard built-in constructor with that name and 
            //    len is the value of len.
            A = new Array(len);

            // 7. Let k be 0
            k = 0;

            // 8. Repeat, while k < len
            while (k < len) {

              var kValue, mappedValue;

              // a. Let Pk be ToString(k).
              //   This is implicit for LHS operands of the in operator
              // b. Let kPresent be the result of calling the HasProperty internal 
              //    method of O with argument Pk.
              //   This step can be combined with c
              // c. If kPresent is true, then
              if (k in O) {

                // i. Let kValue be the result of calling the Get internal 
                //    method of O with argument Pk.
                kValue = O[k];

                // ii. Let mappedValue be the result of calling the Call internal 
                //     method of callback with T as the this value and argument 
                //     list containing kValue, k, and O.
                mappedValue = callback.call(T, kValue, k, O);

                // iii. Call the DefineOwnProperty internal method of A with arguments
                // Pk, Property Descriptor
                // { Value: mappedValue,
                //   Writable: true,
                //   Enumerable: true,
                //   Configurable: true },
                // and false.

                // In browsers that support Object.defineProperty, use the following:
                // Object.defineProperty(A, k, {
                //   value: mappedValue,
                //   writable: true,
                //   enumerable: true,
                //   configurable: true
                // });

                // For best browser support, use the following:
                A[k] = mappedValue;
              }
              // d. Increase k by 1.
              k++;
            }

            // 9. return A
            return A;
          };
        }

        if (!Array.prototype.reduce) {
          Array.prototype.reduce = function(callback /*, initialValue*/) {
            'use strict';
            if (this == null) {
              throw new TypeError('Array.prototype.reduce called on null or undefined');
            }
            if (typeof callback !== 'function') {
              throw new TypeError(callback + ' is not a function');
            }
            var t = Object(this), len = t.length >>> 0, k = 0, value;
            if (arguments.length == 2) {
              value = arguments[1];
            } else {
              while (k < len && !(k in t)) {
                k++; 
              }
              if (k >= len) {
                throw new TypeError('Reduce of empty array with no initial value');
              }
              value = t[k++];
            }
            for (; k < len; k++) {
              if (k in t) {
                value = callback(value, t[k], k, t);
              }
            }
            return value;
          };
        }
    </script>
    <!--[if lt IE 9]><script>oldIE = true;</script><![endif]-->
   
    <script type="text/javascript" src="vendor/requirejs/require.js" data-main="demo.js?v=1.2"></script>

    <style>
    	#app {
    		width: 960px;
    		margin: 0 auto;
    	}

    	.address {
    		margin: 0 0 30px;
    	}

    	#addressForm {
    		margin-right: 50px;
    	}

	    	#addressForm label {
	    		display:block;
	    		margin-top: 10px;
	    	}

        .invalid {
            background: red;
            color: white;
        }

        .requiredField:after {
            content: "*";
            color: red;
        }
	    	
    </style>
</head>
<body>
	<h1>Flux Demo Page</h1>
    
    <div id="app"></div>

</body>
</html> 
